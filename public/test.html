<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç Telegram Web App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .container {
            text-align: center;
            max-width: 400px;
        }
        .status {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .success { color: #4CAF50; }
        .error { color: #f44336; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé∞ –¢–µ—Å—Ç Telegram Web App</h1>
        
        <div class="status">
            <h3>–°—Ç–∞—Ç—É—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:</h3>
            <div id="status">–ü—Ä–æ–≤–µ—Ä—è–µ–º...</div>
        </div>
        
        <div class="status">
            <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ:</h3>
            <div id="user-info">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
        
        <div class="status">
            <h3>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—É—Å–∫–∞:</h3>
            <div id="launch-params">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
        
        <button onclick="testMainButton()" style="background: #4CAF50; color: white; border: none; padding: 15px 30px; border-radius: 5px; font-size: 16px; cursor: pointer;">
            üéÆ –¢–µ—Å—Ç –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
        </button>
    </div>

    <script>
        console.log('üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã...');
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Telegram Web App
        if (window.Telegram && window.Telegram.WebApp) {
            document.getElementById('status').innerHTML = '<span class="success">‚úÖ Telegram Web App –¥–æ—Å—Ç—É–ø–µ–Ω</span>';
            console.log('‚úÖ Telegram Web App –¥–æ—Å—Ç—É–ø–µ–Ω');
            
            try {
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Web App
                window.Telegram.WebApp.ready();
                console.log('‚úÖ Web App –≥–æ—Ç–æ–≤');
                
                // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
                const user = window.Telegram.WebApp.initDataUnsafe?.user;
                if (user) {
                    document.getElementById('user-info').innerHTML = `
                        <strong>–ò–º—è:</strong> ${user.first_name}<br>
                        <strong>ID:</strong> ${user.id}<br>
                        <strong>Username:</strong> ${user.username || '–ù–µ —É–∫–∞–∑–∞–Ω'}
                    `;
                    console.log('‚úÖ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', user);
                } else {
                    document.getElementById('user-info').innerHTML = '<span class="error">‚ùå –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</span>';
                    console.log('‚ùå –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
                }
                
                // –ü–æ–ª—É—á–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—É—Å–∫–∞
                const initData = window.Telegram.WebApp.initData;
                document.getElementById('launch-params').innerHTML = `
                    <strong>Init Data:</strong> ${initData || '–ü—É—Å—Ç–æ'}<br>
                    <strong>Platform:</strong> ${window.Telegram.WebApp.platform}<br>
                    <strong>Version:</strong> ${window.Telegram.WebApp.version}
                `;
                console.log('‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—É—Å–∫–∞:', {
                    initData,
                    platform: window.Telegram.WebApp.platform,
                    version: window.Telegram.WebApp.version
                });
                
            } catch (error) {
                document.getElementById('status').innerHTML = `<span class="error">‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: ${error.message}</span>`;
                console.error('‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
            }
        } else {
            document.getElementById('status').innerHTML = '<span class="error">‚ùå Telegram Web App –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω</span>';
            document.getElementById('user-info').innerHTML = '<span class="error">‚ùå –ó–∞–ø—É—â–µ–Ω–æ –Ω–µ –≤ Telegram</span>';
            document.getElementById('launch-params').innerHTML = '<span class="error">‚ùå –ó–∞–ø—É—â–µ–Ω–æ –Ω–µ –≤ Telegram</span>';
            console.log('‚ùå Telegram Web App –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω - –∑–∞–ø—É—â–µ–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ');
        }
        
        function testMainButton() {
            if (window.Telegram && window.Telegram.WebApp) {
                try {
                    window.Telegram.WebApp.MainButton.setText('üé∞ –¢–µ—Å—Ç –∫–Ω–æ–ø–∫–∏');
                    window.Telegram.WebApp.MainButton.show();
                    window.Telegram.WebApp.MainButton.onClick(() => {
                        alert('üéâ –ì–ª–∞–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç!');
                    });
                    alert('‚úÖ –ì–ª–∞–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞!');
                } catch (error) {
                    alert(`‚ùå –û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–Ω–æ–ø–∫–∏: ${error.message}`);
                }
            } else {
                alert('‚ùå Telegram Web App –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
            }
        }
    </script>
</body>
</html> 